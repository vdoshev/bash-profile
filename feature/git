#!/usr/bin/env bash
alias gs='git status'

alias git-commit='git commit -m "Message $(head -1 <(fold -w 20  <(tr -dc "a-zA-Z0-9" < /dev/urandom)))"'
alias git-add-commit='git add . && git-commit'
alias git-amend='git add . && git commit --amend'
alias git-amend-push='git-amend && git push -f'

# Pull from multiple git remote repositories (can also be nested).
function git_pull() {
  local dir git_dir remote

  for dir in "${@:-.}"; do
    find "${dir}" -type d -name '.git' | while read -r git_dir; do
      (
        if cd "${git_dir}/.."; then
          git remote | while IFS= read -r remote; do
            echo ""
            echo "Pulling from $(git remote get-url "${remote}") (${remote}) to $(pwd)"
            git pull --tags --force "${remote}"
          done
        fi
      )
    done
  done
}
alias git-pull=git_pull
